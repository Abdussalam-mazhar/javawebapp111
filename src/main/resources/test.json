{
  "Packages": [
    {
      "Name": "core",
      "actions": [
        {
          "name": "ShowHelp",
          "steps": [
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "The following commands are available:
* /new - create a new character
* /help - show this help info
* /village, /mountain, /woodlands - move around"
              }
            }
          ]
        },
        {
          "name": "GetPlayerAttribute",
          "inputs": [
            "AttributeName"
          ],
          "steps": [
            {
              "ProcName": "Native:ReadVar",
              "ParamMappings": {
                "VarSet": "Player",
                "VarName": "${AttributeName}"
              },
              "OutputMappings": {
                "VarValue": "AttributeValue"
              }
            }
          ],
          "outputs": [
            "AttributeValue"
          ]
        },
        {
          "name": "SetPlayerAttribute",
          "inputs": [
            "AttributeName",
            "AttributeValue"
          ],
          "steps": [
            {
              "ProcName": "Native:SetVar",
              "ParamMappings": {
                "VarSet": "__Player",
                "VarName": "${AttributeName}",
                "VarValue": "${AttributeValue}"
              }
            }
          ]
        }
      ]
    },
    {
      "Name": "setup",
      "actions": [
        {
          "name": "PlayerSetup",
          "steps": [
            {
              "ProcName": "ReadPlayerName"
            },
            {
              "ProcName": "ReadPlayerClass"
            },
            {
              "ProcName": "Goto",
              "ParamMappings": {
                "NewLocation": "The Village"
              }
            },
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "Welcome, ${Player.Name} the ${Player.Class}! You are at ${Player.Location}"
              }
            }
          ]
        },
        {
          "name": "ReadPlayerName",
          "steps": [
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "By what name will you be known?"
              }
            },
            {
              "ProcName": "Native:ReadTextInput",
              "OutputMappings": {
                "CapturedText": "CharacterName"
              }
            },
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "Very well. So shall you be known."
              }
            },
            {
              "ProcName": "SetPlayerAttribute",
              "ParamMappings": {
                "AttributeName": "Name",
                "AttributeValue": "${CharacterName}"
              }
            }
          ]
        },
        {
          "name": "ReadPlayerClass",
          "steps": [
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "Please choose your player class"
              }
            },
            {
              "ProcName": "Native:ReadOption",
              "ParamMappings": {
                "OptionsCSV": "Wizard,Druid,Explorer"
              },
              "OutputMappings": {
                "ChosenOption": "Class"
              }
            },
            {
              "ProcName": "SetPlayerAttribute",
              "ParamMappings": {
                "AttributeName": "Class",
                "AttributeValue": "${Class}"
              }
            }
          ]
        },
        {
          "name": "Goto",
          "inputs": ["NewLocation"],
          "steps": [
            {
              "ProcName": "SetPlayerAttribute",
              "ParamMappings": {
                "AttributeName": "Location",
                "AttributeValue": "${NewLocation}"
              }
            },
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "You are now at ${Player.Location}"
              }
            },
            {
              "ProcName": "VillageMenu"
            }
          ]
        }
      ]
    },
    {
      "Name": "io",
      "actions": [
        {
          "name": "Echo",
          "inputs": [
            "MessageToPrint"
          ],
          "steps": [
            {
              "ProcName": "Native:SendMessage",
              "ParamMappings": {
                "Message": "${MessageToPrint}"
              }
            }
          ]
        },
        {
          "name": "ReadOption",
          "inputs": [
            "OptionsCSV"
          ],
          "steps": [
            {
              "ProcName": "Native:ReadOption",
              "ParamMappings": {
                "OptionsCSV": "OptionsCSV"
              },
              "OutputMappings": {
                "ChosenOption": "ChosenOption"
              }
            }
          ],
          "outputs": [
            "ChosenOption"
          ]
        }
      ]
    },

    {
      "Name": "Village",
      "actions": [
        {
          "name": "VillageMenu",
          "steps": [
            {
              "ProcName": "Echo",
              "ParamMappings": {
                "MessageToPrint": "The bustle of the village square brings a reassuring comfort to weary adventurers - the only danger here is the prices charged by the local bartender. 
The square is dominated on the one side by the local tavern, from which you hear loud music and the occasional raised voides of a disagreement.
Facing it, within stumbling range, is the Inn. The innkeeper is a friend, and has offered to look after any items you may wish to leave behind while you're out on your adventures.
To the north lies a path leading up to The Mountain, and another leading out to the Woodlands."
              }
            },
            {
              "ProcName": "ReadOption",
              "ParamMappings": {
                "OptionsCSV": "The Inn,The Mountain,The Woodlands"
              }
            }
          ]
        }
      ]
    }
  ]
}
